enyo.kind({name:"b3.localStorageSource",kind:"enyo.Source",fetch:function(a,b){if(a instanceof enyo.Model){var c=JSON.parse(localStorage.getItem(b.euid||a.euid));a.euid=b.euid,a.isNew=!1,a.setObject(c)}else{var d=b.kindName||(new a.model).kindName;a.removeAll();for(var e=0;e<localStorage.length;e++){var f=localStorage.key(e);if(d===f.substr(0,d.length)){var g=f.substr(d.length+1),c=JSON.parse(localStorage.getItem(f)),h=(new a.model).setObject(c);h.euid=g,h.isNew=!1,a.add(h)}}}b.success&&b.success()},commit:function(a){a.isNew=!1;var b=a.kindName+"_"+a.euid;localStorage.setItem(b,a.toJSON())},destroy:function(a,b){var c=(b.euid||a.euid,a.kindName+"_"+a.euid);localStorage.removeItem(c)}});